(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(15),r=a.n(i),s=a(13),o=a(9),l=a.n(o),u=a(11),h=a(2),m=a(3),d=a(5),f=a(4),p=a(6),v=a(7),E=a(8),w=function(e){var t=e.city,a=e.location;return c.a.createElement(n.Fragment,null,t,t===a?c.a.createElement("span",{className:"select__location"},c.a.createElement(v.a,{color:"#e6005c",icon:E.b})):null)},y=(a(29),["London","Berlin","Birmingham","Brussels","Wuerzburg","Paris","Donetsk","Prague","Vienna","Rome","Krakow","Minsk","Boryspil","Berdychiv","Chongqing","Shanghai","Beijing","Istanbul","Dhaka","Shenzhen","Mumbai","Delhi","Baghdad","Baku","Bangalore","Bangkok","Kyiv"]),b=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={value:""},a.handleOnChange=function(e){a.setState({value:e.target.value})},a.SearchInput=c.a.createRef(),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("ul",null,c.a.createElement("li",{key:"textinput",className:"cityInput"},c.a.createElement("input",{type:"text",onChange:this.handleOnChange,value:this.state.value}),c.a.createElement(v.a,{className:"searchIcon",icon:E.c})),c.a.createElement("li",null,c.a.createElement("ul",{ref:this.SearchInput,className:"SearchList"},y.filter(function(t){return!(!e.state.value||e.props.cities.includes(t))&&t.toLowerCase().startsWith(e.state.value.toLowerCase())}).map(function(t){return c.a.createElement("li",{key:t},c.a.createElement("button",{className:"SearchList__item",onClick:function(){e.props.addCity(t),e.SearchInput.current.focus()}},t))}))))}}]),t}(n.Component),k=function(e){function t(e){return Object(h.a)(this,t),Object(d.a)(this,Object(f.a)(t).call(this,e))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cities,a=e.location,n=e.selected,i=e.selectCity,r=e.closeDropDown,s=e.deleteCity,o=e.isActive,l=e.addCity;return c.a.createElement("ul",{className:o?"CitiesList animatedListOut":"CitiesList animatedListIn"},c.a.createElement("li",{className:"searchSection"},c.a.createElement(b,{cities:t,addCity:l})),t.map(function(e){return e===n?null:c.a.createElement("li",{key:e},c.a.createElement("button",{className:"selectButton",onClick:function(t){"selectButton"===t.target.className&&(i(e),r())}},c.a.createElement(w,{city:e,location:a}),e!==a?c.a.createElement("div",{className:"selectDelete",onClick:function(){return s(e)}},"x"):c.a.createElement("div",{className:"selectDelete",style:{backgroundColor:"grey"},onClick:function(){}},"x")))}))}}]),t}(c.a.Component),C=(a(30),function(e){return function(t){function a(e){var t;return Object(h.a)(this,a),(t=Object(d.a)(this,Object(f.a)(a).call(this,e))).state={shouldRender:t.props.isActive},t}return Object(p.a)(a,t),Object(m.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;!this.props.isActive&&e.isActive?setTimeout(function(){t.setState({shouldRender:!1})},this.props.delay):this.props.isActive&&!e.isActive&&this.setState({shouldRender:!0})}},{key:"render",value:function(){return this.state.shouldRender?c.a.createElement(e,this.props):null}}]),a}(c.a.Component)}(k)),O=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).timeOutId=null,a.blockRef=c.a.createRef(),a.state={isActive:!1},a.outsideHandler=function(e){a.state.isActive&&!a.blockRef.current.contains(e.target)&&a.setState({isActive:!1})},a.onClickHandler=function(){a.setState({isActive:!a.state.isActive})},a.onBlurHandle=function(){a.timeOutId=setTimeout(function(){return a.setState({isActive:!1})})},a.closeDropDown=function(){a.setState({isActive:!1})},a.onFocusHandle=function(){clearTimeout(a.timeOutId)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.outsideHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.outsideHandler)}},{key:"render",value:function(){var e=this.props,t=e.cities,a=e.location,n=e.selected;return c.a.createElement("div",{className:"select",onBlur:this.onBlurHandle,onFocus:this.onFocusHandle,ref:this.blockRef},c.a.createElement("button",{onClick:this.onClickHandler},t.length?c.a.createElement(w,{city:n,location:a}):"Loading...",c.a.createElement("span",{className:"select__arrow"},c.a.createElement(v.a,{className:this.state.isActive?"select__arrow-rotate arrow-active":"select__arrow-rotate",icon:E.a,color:"white"}))),c.a.createElement(C,Object.assign({},this.props,{isActive:this.state.isActive,closeDropDown:this.closeDropDown,delay:200})))}}]),t}(n.Component),g=(a(31),a(32),function(e){var t=e.weather;return c.a.createElement("div",{className:"animatedShowOut"},c.a.createElement("div",{className:"ShowWeather__title"},"Now"),c.a.createElement("div",{className:"ShowWeather__item"},c.a.createElement("div",null,c.a.createElement("img",{src:"https://openweathermap.org/img/w/".concat(t.weather[0].icon,".png"),alt:t.weather[0].main,title:t.weather[0].main})),c.a.createElement("div",null,c.a.createElement("span",{className:"ShowWeather__temp"},Math.round(t.main.temp))),c.a.createElement("div",null,c.a.createElement("span",{className:"ShowWeather__C"},"\u2103"))))}),N=a(16),j=a.n(N),S=(a(34),function(e){var t=e.forecast;return c.a.createElement("div",{className:"animatedShowOut"},c.a.createElement("div",{className:"WeekBlock"},t.daily.data.map(function(e,t){var a=t?j.a.unix(e.time).format("dddd"):"Today";return c.a.createElement("div",{key:e.time,className:"WeekWeather"},c.a.createElement("div",{className:"WeekWeather__title"},a),c.a.createElement("div",{className:"WeekWeather__item"},c.a.createElement("div",null,c.a.createElement("span",{className:"WeekWeather__temp"},Math.round(e.temperatureMax)," / ",Math.round(e.temperatureMin))),c.a.createElement("div",null,c.a.createElement("span",{className:"WeekWeather__C"},"\u2103"))))})))}),W=function(){return c.a.createElement("div",{className:"Loading"},c.a.createElement("span",{className:"dot1"}),c.a.createElement("span",{className:"dot2"}),c.a.createElement("span",{className:"dot3"}))},_=function(e){var t=e.isActive,a=e.weather,n=e.period,i=e.forecast;return c.a.createElement("div",{className:"ShowWeather"},t?n?c.a.createElement(S,{forecast:i}):c.a.createElement(g,{weather:a}):c.a.createElement(W,null))},x=(a(35),function(e){e.period;var t=e.selectPeriod;return c.a.createElement("div",{className:"Switcher"},c.a.createElement("div",{className:"onoffswitch"},c.a.createElement("input",{type:"checkbox",name:"onoffswitch",className:"onoffswitch-checkbox",id:"myonoffswitch",defaultChecked:!0,onChange:t}),c.a.createElement("label",{className:"onoffswitch-label",htmlFor:"myonoffswitch"},c.a.createElement("span",{className:"onoffswitch-inner"}),c.a.createElement("span",{className:"onoffswitch-switch"}))))}),A=[],B=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={fetchingLocation:!0,fetchingWeather:!0,cities:[],location:null,selected:null,period:!1},a.fetchCurrentCity=Object(u.a)(l.a.mark(function e(){var t,n,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cors-anywhere.herokuapp.com/http://ip-api.com/json/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,A.includes(n.city)?a.setState({cities:A,location:n.city,selected:n.city,fetchingLocation:!1}):(c=[n.city].concat(A),a.setState({cities:c,location:n.city,selected:n.city,fetchingLocation:!1})),e.abrupt("return",n.city);case 8:case"end":return e.stop()}},e)})),a.fetchWeather=function(){var e=Object(u.a)(l.a.mark(function e(t){var n,c,i,r,s,o,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&APPID=8afbf2b43774114901cdea52c9b4efa7"),a.setState({fetchingWeather:!0}),e.next=4,fetch(n);case 4:return c=e.sent,e.next=7,c.json();case 7:return i=e.sent,r=i.coord,s="https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/fbd2108ed6d3ac960db8fdadae007193/".concat(r.lat,",").concat(r.lon,"?units=si"),e.next=12,fetch(s);case 12:return o=e.sent,e.next=15,o.json();case 15:u=e.sent,a.setState({fetchingWeather:!1,weather:i,forecast:u});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.selectCity=function(e){a.setState({selected:e}),a.fetchWeather(e)},a.selectPeriod=function(){a.setState({period:!a.state.period})},a.deleteCity=function(e){if(e!==a.state.location){var t=a.state.cities.indexOf(e),n=Object(s.a)(a.state.cities);n.splice(t,1),a.setState({cities:n})}},a.addCity=function(e){-1===a.state.cities.indexOf(e)&&a.setState({cities:[].concat(Object(s.a)(a.state.cities),[e])})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(u.a)(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchCurrentCity();case 2:a=t.sent,e.fetchWeather(a,e.state.period);case 4:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this.state,t=(e.fetchingLocation,e.fetchingWeather,e.cities),a=e.location,n=e.selected;return c.a.createElement("div",{className:"WeatherApp"},c.a.createElement(O,{cities:t,location:a,selected:n,selectCity:this.selectCity,deleteCity:this.deleteCity,addCity:this.addCity}),c.a.createElement(_,{isActive:!this.state.fetchingWeather,weather:this.state.weather,period:this.state.period,forecast:this.state.forecast}),c.a.createElement(x,{period:this.state.period,selectPeriod:this.selectPeriod}))}}]),t}(n.Component);r.a.render(c.a.createElement(B,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.a6a74425.chunk.js.map